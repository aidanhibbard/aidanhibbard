<svg viewBox="0 0 800 700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      @keyframes pulseIn {
        0%, 100% {
          stroke-dashoffset: 1000;
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        45% {
          stroke-dashoffset: 0;
          opacity: 1;
        }
        50% {
          opacity: 0;
        }
      }
      
      @keyframes pulseOut {
        0%, 50% {
          stroke-dashoffset: 1000;
          opacity: 0;
        }
        55% {
          opacity: 1;
        }
        95% {
          stroke-dashoffset: 0;
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      
      .purple-line-in {
        stroke: #a855f7;
        stroke-width: 3;
        fill: none;
        stroke-dasharray: 20 10;
        stroke-dashoffset: 1000;
        animation: pulseIn 8s ease-in-out infinite;
      }
      
      .purple-line-out {
        stroke: #a855f7;
        stroke-width: 3;
        fill: none;
        stroke-dasharray: 20 10;
        stroke-dashoffset: 1000;
        animation: pulseOut 8s ease-in-out infinite;
      }
      
      .blue-line-in {
        stroke: #3b82f6;
        stroke-width: 3;
        fill: none;
        stroke-dasharray: 20 10;
        stroke-dashoffset: 1000;
        animation: pulseIn 8s ease-in-out infinite;
      }
      
      .blue-line-out {
        stroke: #3b82f6;
        stroke-width: 3;
        fill: none;
        stroke-dasharray: 20 10;
        stroke-dashoffset: 1000;
        animation: pulseOut 8s ease-in-out infinite;
      }
      
      .gray-line {
        stroke: #9ca3af;
        stroke-width: 2;
        fill: none;
      }
      
      .service-box {
        fill: #1f2937;
        stroke: #4b5563;
        stroke-width: 2;
      }
    </style>
  </defs>
  
  <!-- Layer 1: Gray Lines (Base) -->
  <g id="gray-lines">
    <!-- Top lines with rounded curves connecting to bottom of service boxes -->
    <!-- Central line from integrator top to fork point -->
    <path class="gray-line" d="M 400 320 L 400 200" />
    
    <!-- Fork lines to top services - connecting to bottom center of each box -->
    <path class="gray-line" d="M 400 200 Q 400 170 350 150 Q 300 130 200 130 L 200 140" />
    <path class="gray-line" d="M 400 200 Q 400 170 370 150 Q 340 130 300 130 L 300 140" />
    <path class="gray-line" d="M 400 200 Q 400 170 430 150 Q 460 130 500 130 L 500 140" />
    <path class="gray-line" d="M 400 200 Q 400 170 450 150 Q 500 130 600 130 L 600 140" />
    
    <!-- Bottom lines with rounded curves connecting to top of service boxes -->
    <!-- Central line from integrator bottom to fork point -->
    <path class="gray-line" d="M 400 380 L 400 500" />
    
    <!-- Fork lines to bottom services - connecting to top center of each box -->
    <path class="gray-line" d="M 400 500 Q 400 530 350 550 Q 300 570 200 570 L 200 560" />
    <path class="gray-line" d="M 400 500 Q 400 530 370 550 Q 340 570 300 570 L 300 560" />
    <path class="gray-line" d="M 400 500 Q 400 530 430 550 Q 460 570 500 570 L 500 560" />
    <path class="gray-line" d="M 400 500 Q 400 530 450 550 Q 500 570 600 570 L 600 560" />
  </g>
  
  <!-- Layer 2: Colored Animated Lines -->
  <g id="colored-lines">
    <!-- Purple lines (top) - pulses flow IN from services to integrator, then OUT -->
    <!-- Pulse IN: from services to integrator -->
    <path class="purple-line-in" d="M 200 140 L 200 130 Q 300 130 350 150 Q 400 170 400 200 L 400 320" />
    <path class="purple-line-in" d="M 300 140 L 300 130 Q 340 130 370 150 Q 400 170 400 200 L 400 320" style="animation-delay: 0.1s;" />
    <path class="purple-line-in" d="M 500 140 L 500 130 Q 460 130 430 150 Q 400 170 400 200 L 400 320" style="animation-delay: 0.2s;" />
    <path class="purple-line-in" d="M 600 140 L 600 130 Q 500 130 450 150 Q 400 170 400 200 L 400 320" style="animation-delay: 0.3s;" />
    
    <!-- Pulse OUT: from integrator to services -->
    <path class="purple-line-out" d="M 400 320 L 400 200 Q 400 170 350 150 Q 300 130 200 130 L 200 140" />
    <path class="purple-line-out" d="M 400 320 L 400 200 Q 400 170 370 150 Q 340 130 300 130 L 300 140" style="animation-delay: 0.1s;" />
    <path class="purple-line-out" d="M 400 320 L 400 200 Q 400 170 430 150 Q 460 130 500 130 L 500 140" style="animation-delay: 0.2s;" />
    <path class="purple-line-out" d="M 400 320 L 400 200 Q 400 170 450 150 Q 500 130 600 130 L 600 140" style="animation-delay: 0.3s;" />
    
    <!-- Blue lines (bottom) - pulses flow IN from services to integrator, then OUT -->
    <!-- Pulse IN: from services to integrator -->
    <path class="blue-line-in" d="M 200 560 L 200 570 Q 300 570 350 550 Q 400 530 400 500 L 400 380" />
    <path class="blue-line-in" d="M 300 560 L 300 570 Q 340 570 370 550 Q 400 530 400 500 L 400 380" style="animation-delay: 0.1s;" />
    <path class="blue-line-in" d="M 500 560 L 500 570 Q 460 570 430 550 Q 400 530 400 500 L 400 380" style="animation-delay: 0.2s;" />
    <path class="blue-line-in" d="M 600 560 L 600 570 Q 500 570 450 550 Q 400 530 400 500 L 400 380" style="animation-delay: 0.3s;" />
    
    <!-- Pulse OUT: from integrator to services -->
    <path class="blue-line-out" d="M 400 380 L 400 500 Q 400 530 350 550 Q 300 570 200 570 L 200 560" />
    <path class="blue-line-out" d="M 400 380 L 400 500 Q 400 530 370 550 Q 340 570 300 570 L 300 560" style="animation-delay: 0.1s;" />
    <path class="blue-line-out" d="M 400 380 L 400 500 Q 400 530 430 550 Q 460 570 500 570 L 500 560" style="animation-delay: 0.2s;" />
    <path class="blue-line-out" d="M 400 380 L 400 500 Q 400 530 450 550 Q 500 570 600 570 L 600 560" style="animation-delay: 0.3s;" />
  </g>
  
  <!-- Layer 3: Service Boxes -->
  <g id="services">
    <!-- Top services repositioned further from center with equidistant spacing -->
    <rect class="service-box" x="170" y="140" width="60" height="60" rx="8" />
    <rect class="service-box" x="270" y="140" width="60" height="60" rx="8" />
    <rect class="service-box" x="470" y="140" width="60" height="60" rx="8" />
    <rect class="service-box" x="570" y="140" width="60" height="60" rx="8" />
    
    <!-- Integrator (center) -->
    <rect class="service-box" x="370" y="320" width="60" height="60" rx="8" />
    
    <!-- Bottom services repositioned further from center with equidistant spacing -->
    <rect class="service-box" x="170" y="500" width="60" height="60" rx="8" />
    <rect class="service-box" x="270" y="500" width="60" height="60" rx="8" />
    <rect class="service-box" x="470" y="500" width="60" height="60" rx="8" />
    <rect class="service-box" x="570" y="500" width="60" height="60" rx="8" />
  </g>
</svg>